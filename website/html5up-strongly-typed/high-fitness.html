<!DOCTYPE HTML>
<!--
	Strongly Typed by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>High Fitness</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<style>
			ul.no-bullets {
			  list-style-type: none;
			  margin: 0;
			  padding: 0;
			}
		</style>
		<script src="https://player.vimeo.com/api/player.js"></script>
	</head>
	<body class="no-sidebar is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<section id="header">
					<div class="container">

						<!-- Logo -->
							<h1 id="logo"><a href="index.html">High Fitness</a></h1>
							<p>
								<ul class="no-bullets">
									<li><strong>Streaming Sundays, Tuesdays and Thursdays at 10am</strong></li>
									<li><strong>Tuesdays and Thursdays at 6pm</strong></li>
									<li><strong>Wednesdays and Fridays at 6:30am</strong></li>
								</ul>
							</p>

						<!-- Nav -->
							<!-- Nav -->
					<!--	<div id="logged-out-nav" style="display:none"> -->
							<nav id="nav">
								<ul>
									<li><a class="icon solid fa-home" href="home.html"><span>Home</span></a></li>
									<li><a class="icon solid fa-sitemap" id=reglink href="user-info.html"><span id="regText">Your Account</span></a></li>
									<li><a class="icon solid fa-sitemap" id="loginLink" href="buy-package.html"><span id="loginText">Buy A Package</span></a></li>
									<li>
										<a id="high-top-menu" href="high-fitness.html" class="icon fa-chart-bar"><span>High Fitness</span></a>
											<ul>
												<li id="book-class"><a href="high-live-list.html" >Book a Live Class</a></li>
												<li id="streaming"><a href="high-fitness.html">Online Streaming</a></li>
											</ul>
									</li>
									<li><a class="icon solid fa-retweet" href="boot-camp.html"><span>Boot Camp</span></a></li>
									<li><a class="icon solid fa-sitemap" id="bioLink" href="javascript:signOut()"><span id="bioText">Sign Out</span></a></li>
								</ul>
							</nav>
					

					</div>
				</section>

			<!-- Main -->
				<section id="main">
					<div class="container">
						<div id="content">

							<!-- Post -->
									<div>
										<p>Aerobics is back! Bigger, better, HIGHer!
Experience more than just a workout! HIGH fitness is simple, intense, consistent, inclusive and fun! HIGH gets participants addicted and coming back for more! HIGH takes old school aerobics to the next level with modern fitness techniques such as hiit training, plyometrics, intervals of strength and cardio, and more. You can go high or you can go low, but you will always leave feeling HIGH!
										<p>
											HIGH Fitness is an emerging leader in group fitness, inspiring people from all walks of life to a lifestyle of better health and overall wellness. HIGH transforms old school aerobics into a highly addictive new fitness experience that combines simple, modern fitness techniques (i.e. HIIT, plyometrics, etc.) with music you know and love. This results in a high energy, INTENSE and crazy fun workout that leaves participants feeling HIGH and wanting more. Our formula alternates between cardio peaks and toning tracks that will take your heart rate to the sky and strength to the next level. Beyond the workout, the HIGH fitness culture embodies a lifestyle of empowering people to maximize their health and be the best version of themselves.
									<div id="scheduledTimes">
										<p><strong>Current High Streaming Times are:</strong>
											<ul>
												<li>Sundays, Tuesdays and Thursdays at 10am</li>
												<li>Tuesdays and Thursdays at 6pm</li>
												<li>Wednesdays and Fridays at 6:30am</li>
											</ul>
										</p>
									</div>
									<div id="streamingFrame" style="display:none">
	
										<iframe id="highVideoLink" src="" width="100%" height="600" sandbox="allow-scripts allow-forms allow-same-origin allow-top-navigation" allowfullscreen></iframe>
									</div>
							

						</div>
					</div>
				</section>

			

		</div>

<script>


window.onload = isLoggedIn()

function parseCookie()
{
	jwt = document.cookie.split('; ')
  	.find(row => row.startsWith('auth'))
  	.split('=')[1];

  	return jwt;
}

function isLoggedIn()
{
	if (document.cookie.length == 0)
	{
		window.location.replace("sign-in.html")
	}
	else
	{
		token = parseCookie();
		if(token != null)
		{
			getUserData()
		}
	}
}

function getUserData()
{
	var postRequest = new XMLHttpRequest()

	postRequest.open('POST', 'https://zkhudp5vdk.execute-api.us-east-2.amazonaws.com/default/any', true)
	postRequest.setRequestHeader('Content-type', 'application/json;charset=UTF-8');
	postRequest.setRequestHeader('X-Api-Key', parseCookie())
	//postRequest.withCredentials = true;
	
	postRequest.onload = function () 
	{
	  // Begin accessing JSON data here
	  var responseData = JSON.parse(this.response)

	  if (postRequest.status >= 200 && postRequest.status < 400) 
	  {
	  		json = JSON.parse(postRequest.responseText);
			isActive = json.isActiveForStream;
			if(isActive == true)
			{
				getGoogleLink()
				setInterval(getGoogleLink, 60000);
			}
	  }
	  
	}

	postRequest.send()
}


function getGoogleLink()
{
	var postRequest = new XMLHttpRequest()

	postRequest.open('POST', 'https://ibabt28zng.execute-api.us-east-2.amazonaws.com/default/any', true)
	postRequest.setRequestHeader('Content-type', 'application/json;charset=UTF-8');
	postRequest.setRequestHeader('X-Api-Key', parseCookie())
	
	postRequest.onload = function () 
	{
	  // Begin accessing JSON data here
	  var responseData = JSON.parse(this.response)

	  if (postRequest.status >= 200 && postRequest.status < 400) 
	  {
	  		json = JSON.parse(postRequest.responseText);
	  		if( json.url == null)
	  		{
	  			document.getElementById("highVideoLink").src = "";
	  			document.getElementById("streamingFrame").style.display = "none"
	  			return
	  		}
	  		if(document.getElementById("streamingFrame").style.display == "none")
	  		{
	  			document.getElementById("highVideoLink").src = json.url;
				document.getElementById("streamingFrame").style.display = "block"
				document.getElementById("scheduledTimes").style.display = "none"
				setupVimeo()
	  		}
	  }
	  else 
	  {
	  	//alert(postRequest.responseText)
	  }
	}

	postRequest.send()
}

function setupVimeo()
{
	var iframe = document.querySelector('iframe');
	var player = new Vimeo.Player(iframe);
	var video_title = ""

	player.on('loaded', function() {
		player.getVideoTitle().then(function(title) {
	  		video_title = title;
	  	});
	}); 

	player.on('play', function() {

	  		saveStats(video_title)
  
	});
}


function saveStats(classname)
{
	var postRequest = new XMLHttpRequest()

	postRequest.open('POST', 'https://qt8y1hjn61.execute-api.us-east-2.amazonaws.com/default/any', true)
	postRequest.setRequestHeader('Content-type', 'application/json;charset=UTF-8');
	postRequest.setRequestHeader('X-Api-Key', parseCookie())

	data = {
		'classname' : classname,
		'class_type' : 'High'
	}
	
	postRequest.onload = function () 
	{
	  // Begin accessing JSON data here
	  var responseData = JSON.parse(this.response)
	}

	postRequest.send(JSON.stringify(data))
}


function signOut()
{
	document.cookie = 'auth=' + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
	window.location.replace("index.html");
}
</script>
<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/jquery.dropotron.min.js"></script>
<script src="assets/js/browser.min.js"></script>
<script src="assets/js/breakpoints.min.js"></script>
<script src="assets/js/util.js"></script>
<script src="assets/js/main.js"></script>

	</body>
</html>